#!/usr/bin/env bash
# Loop through all the PIDs in /proc
for pid in /proc/[0-9]*; do
    # Check if the process is running
    if [[ -d $pid ]]; then
        # Get the process name from the cmdline file directly
        process_name=$(tr '\0' ' ' < "$pid/cmdline" 2>/dev/null)
        # Check if the process name contains 'bash'
        if [[ $process_name == *"bash"* ]]; then
            # Get the actual PID and print it with the process name
            echo "$(basename "$pid") $process_name"
        fi
    fi
done
